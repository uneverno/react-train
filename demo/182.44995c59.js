(self.webpackChunktrain=self.webpackChunktrain||[]).push([[182],{4182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(2122),s=r(2137),a=r(6610),o=r(5991),c=r(379),u=r(6070),i=r(7608),d=r(7757),l=r.n(d),p=r(7294),f=r(1624);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var y=function(e){(0,c.Z)(u,e);var t,r=h(u);function u(e){var t;return(0,a.Z)(this,u),(t=r.call(this,e)).state={data:[],user1:new URLSearchParams(e.history.location.search).get("player1"),user2:new URLSearchParams(e.history.location.search).get("player2")||""},t}return(0,o.Z)(u,[{key:"componentDidMount",value:(t=(0,s.Z)(l().mark((function e(){var t,r,n,s,a,o,c=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.user1,n=t.user2,r&&n){e.next=5;break}this.props.history.push("/battle"),e.next=11;break;case 5:return s="",a="",o=[],e.next=8,Promise.all([(0,f.Z)("https://api.github.com/users/".concat(r)).then((function(e){s=e})).catch((function(){c.setState({loading:!1})})),(0,f.Z)("https://api.github.com/users/".concat(n)).then((function(e){a=e})).catch((function(){c.setState({loading:!1})}))]);case 8:s.public_repos>a.public_repos?(s.result="Winner",a.result="Loser"):s.public_repos===a.public_repos?(s.result="Draw",a.result="Draw"):(s.result="Loser",a.result="Winner"),o.unshift(s,a),this.setState({data:o,loading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.loading,r=e.data,s=void 0===r?[]:r;return React.createElement("div",{className:"result-page"},React.createElement(Result,(0,n.Z)({data:s},this.props,{loading:t})))}}]),u}(p.Component)},1624:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});r(9373);var n=r(1187),s=r(484),a=r(9669),o=r.n(a);r(129);function c(e){var t="异常错误";return e&&"Failed to fetch"===e.message?t="网络异常，请检查网络连接":e&&e.response&&404===e.response.status?t=e.response.data.message:e&&e.response&&401===e.response.status?(t=e.response.data.head.result,sessionStorage.clear()):e&&e.response?t="string"==typeof e.response.data?"请求失败":"string"==typeof e.response.data.body?e.response.data.body?"".concat(e.response.data.body):"".concat(e.response.data.head.result):e.response.data.body&&"object"===(0,s.Z)(e.response.data.body)?"".concat(e.response.data.body.data||e.response.data.body.msg||e.response.data.head.result):e.response.data.head?"".concat(e.response.data.head.result):e.response.data.message:e&&e.message.includes("timeout")&&(t="请求超时，请稍后重试"),t}function u(e){n.default.destroy(),n.default.error(e)}o().defaults.timeout=1e4,o().defaults.retry=4,o().defaults.retryDelay=1e3,o().interceptors.response.use(void 0,(function(e){if(e&&e.message.includes("timeout")){var t=e.config;return t&&t.retry?(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry?Promise.reject(e):(t.__retryCount=1,new Promise((function(e){setTimeout((function(){e()}),t.retryDelay||1)})).then((function(){return o()(t)})))):Promise.reject(e)}!function(e){if(e.status>=200&&e.status<300)return"200"===(e.data.head||{}).code?e:"请求超时，请稍后重试";throw e.response=e,e}(e.response)}));const i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;e="".concat(e);var n={};return t instanceof FormData||(n["Content-Type"]="application/json; charset=UTF-8"),"post"===r?(FormData,new Promise((function(s,a){o()({method:r,url:e,data:t,headers:n}).then((function(e){s(e.data)})).catch((function(e){u(c(e)),a(e)}))}))):new Promise((function(t,r){o().get(e,{headers:n}).then((function(e){e.body=e.data,t(e.data)})).catch((function(e){u(c(e)),r(e)}))}))}}}]);
//# sourceMappingURL=182.44995c59.js.map